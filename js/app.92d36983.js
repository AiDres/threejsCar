(function(){"use strict";var e={5664:function(e,t,o){var i=o(6116),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[e.loadingVisible?t("div",{staticClass:"lmask"},[t("div",{staticClass:"tips"},[e._v("模型加载中~")])]):e._e(),t("car-demo")],1)},r=[],s=o(2332),a=o(5708),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div")},h=[],l=(o(3248),o(180)),d=o(6140),p=o(7216),u=o(6924),m=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const f=o(1312);let C=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"let",void 0),(0,s.c)(this,"scene",void 0),(0,s.c)(this,"camera",void 0),(0,s.c)(this,"renderer",void 0),(0,s.c)(this,"circle",void 0),(0,s.c)(this,"axesHelper",void 0),(0,s.c)(this,"orbitControls",void 0),(0,s.c)(this,"tween",void 0),(0,s.c)(this,"mesh",void 0),(0,s.c)(this,"carOpenStatus","close"),(0,s.c)(this,"carCoverOpenStatus","close"),(0,s.c)(this,"carBackCoverOpenStatus","close"),(0,s.c)(this,"doorsField",[]),(0,s.c)(this,"carFrontCover",[]),(0,s.c)(this,"carbackCover",[]),(0,s.c)(this,"spotLight",void 0),(0,s.c)(this,"footMaterial",new l.GAB({color:0,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03})),(0,s.c)(this,"bodyMaterial",new l.GAB({color:11446527,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03})),(0,s.c)(this,"glassMaterial",new l.GAB({color:0,transparent:!0,opacity:.9,roughness:1,metalness:0,envMapIntensity:1,transmission:.95,clearcoat:1,clearcoatRoughness:0})),(0,s.c)(this,"steeringWheelMaterial",new l.GAB({color:16711680,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}))}init(){this.initScene(),this.initCamera(),this.initRenderer(),this.initAxesHelper(),this.initOrbitControls(),this.loadCarModel(),this.initAmbientLight(),this.initFloor(),this.initSpotLight(),this.initCylinderGeometry(),this.initGui()}renderI(e){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.renderI),this.orbitControls.update(),this.tween&&this.tween.update(e)}initScene(){this.scene=new l.KAh}initCamera(){this.camera=new l.OIf(10,window.innerWidth/window.innerHeight,1.8,1e3),this.camera.position.set(25,3.5,-26)}initRenderer(){this.renderer=new l.gpv({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement)}initAxesHelper(){this.axesHelper=new l._gS,this.scene.add(this.axesHelper)}initOrbitControls(){this.orbitControls=new d.g(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.autoRotate=!0,this.orbitControls.maxDistance=50,this.orbitControls.minDistance=1,this.orbitControls.minPolarAngle=0,this.orbitControls.maxPolarAngle=1.5}initGridHelper(){let e=new l.euB(120,180,"red",16777215);e.material.opacity=.5,e.material.transparent=!0,this.scene.add(e)}loadCarModel(){let e=this;e.$Bus.$emit("visibleMask",!0),(new p.y).load("/threejsCar/scene.glb",(t=>{const o=t.scene;o.scale.set(.01,.01,.01),o.position.y=1.24,e.$Bus.$emit("visibleMask",!1),o.traverse((e=>{-1!=e.name.indexOf("wheels")?e.material=this.footMaterial:-1!=e.name.indexOf("glass")?e.material=this.glassMaterial:"door_rf"===e.name?this.doorsField.push(e):"bonnet_ok"===e.name?this.carFrontCover.push(e):"boot_dummy"===e.name||"JUST_BLACK001"===e.name?this.carbackCover.push(e):"movsteer_10_movsteer_100_0"===e.name?e.material=this.steeringWheelMaterial:e.material=this.bodyMaterial,e.castShadow=!0})),this.scene.add(o)}))}initAmbientLight(){let e=new l._E$("#fff",.5);this.scene.add(e)}initFloor(){const e=new l.qC0(120,120);let t=(new l.EBH).load("/threejsCar/Maple.jpg");const o=new l.GAB({side:l.oJF,color:8421504,metalness:0,roughness:.1,map:t}),i=new l.Ss9(e,o);i.rotation.x=Math.PI/2,i.position.y=.5,i.receiveShadow=!0,this.scene.add(i)}initSpotLight(){this.spotLight=new l.sf1(16777215,200),this.spotLight.position.set(2.5,5,4.5),this.spotLight.angle=Math.PI/6,this.spotLight.penumbra=1,this.spotLight.decay=2,this.spotLight.distance=0,this.spotLight.castShadow=!0,this.spotLight.shadow.mapSize.width=4096,this.spotLight.shadow.mapSize.height=4096,this.spotLight.shadow.camera.near=1,this.spotLight.shadow.camera.far=10,this.spotLight.shadow.focus=1,this.scene.add(this.spotLight)}initCylinderGeometry(){const e=new l.ec6(80,80,120,64),t=new l.GAB({color:7105644,side:l.oJF}),o=new l.Ss9(e,t);this.scene.add(o)}initGui(){let e={footColor:"#000000",bodyColor:"#aea8ff",steeringWheelColor:"#ff0000",carOpen:this.carOpen,carClose:this.carClose,carIn:this.carIn,carOut:this.carOut,carFrontCoverOpen:this.carFrontCoverOpen,carFrontCoverClose:this.carFrontCoverClose,carBackCoverOpen:this.carBackCoverOpen,carBackCoverClose:this.carBackCoverClose,test:()=>{console.log(this.orbitControls.target,this.camera)}},t=new u.cp;t.addColor(e,"footColor").name("车胎颜色").onChange((e=>{this.footMaterial.color.set(e)})),t.addColor(e,"bodyColor").name("车身颜色").onChange((e=>{this.bodyMaterial.color.set(e)})),t.addColor(e,"steeringWheelColor").name("方向盘颜色").onChange((e=>{this.steeringWheelMaterial.color.set(e)})),t.add(e,"carOpen").name("打开车门"),t.add(e,"carClose").name("关闭车门"),t.add(e,"carIn").name("车内视角"),t.add(e,"carOut").name("车外视角"),t.add(e,"carFrontCoverOpen").name("打开车前盖"),t.add(e,"carFrontCoverClose").name("关闭车前盖"),t.add(e,"carBackCoverOpen").name("打开车后盖"),t.add(e,"carBackCoverClose").name("关闭车后盖"),t.add(e,"test").name("获取视野视角")}carOpen(){this.carOpenStatus="open",this.doorsField.forEach((e=>{this.setAnimationDoor({z:0},{z:.8},e)}))}carClose(){this.carOpenStatus="close",this.doorsField.forEach((e=>{this.setAnimationDoor({z:.8},{z:0},e)}))}carIn(){this.orbitControls.enableRotate=!1,this.setAnimationCamera({cx:22.99,cy:32,cz:-15,ox:0,oy:0,oz:0},{cx:.14,cy:2.4,cz:1.5,ox:0,oy:-.5,oz:-6})}carOut(){this.orbitControls.enableRotate=!0,this.setAnimationCamera({cx:.14,cy:2.4,cz:1.5,ox:0,oy:-.5,oz:-6},{cx:22.99,cy:32,cz:-15,ox:0,oy:0,oz:0})}carFrontCoverOpen(){this.carCoverOpenStatus="open",this.carFrontCover.forEach((e=>{this.setAnimationCover({x:0},{x:.6},e)}))}carFrontCoverClose(){this.carCoverOpenStatus="close",this.carFrontCover.forEach((e=>{this.setAnimationCover({x:.6},{x:0},e)}))}carBackCoverOpen(){this.carBackCoverOpenStatus="open",this.carbackCover.forEach((e=>{this.setAnimationCover({x:0},{x:-.8},e)}))}carBackCoverClose(){this.carBackCoverOpenStatus="close",this.carbackCover.forEach((e=>{this.setAnimationCover({x:-.8},{x:0},e)}))}setAnimationCover(e,t,o){this.tween=new f.Tween(e).to(t,1e3).easing(f.Easing.Quadratic.InOut).onUpdate((e=>{o.rotation.x=e.x})).start()}setAnimationDoor(e,t,o){this.tween=new f.Tween(e).to(t,1e3).easing(f.Easing.Quadratic.InOut).onUpdate((e=>{o.rotation.z=e.z})).start()}setAnimationCamera(e,t){this.tween=new f.Tween(e).to(t,3e3).easing(f.Easing.Quadratic.Out).onUpdate((e=>{this.camera.position.set(e.cx,e.cy,e.cz),this.orbitControls.target.set(e.ox,e.oy,e.oz)})).start()}onPointClick(e){let t=new l.SA0,o=new l.SMI;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,o.setFromCamera(t,this.camera);const i=o.intersectObjects(this.scene.children);i.forEach((e=>{"door_rf_primary_0"===e.object.name||"door_rf_glass0_0"===e.object.name?"open"===this.carOpenStatus?this.carClose():this.carOpen():"bonnet_ok_primary_0"===e.object.name?"open"===this.carCoverOpenStatus?this.carFrontCoverClose():this.carFrontCoverOpen():"boot_primary_0"===e.object.name&&("open"===this.carBackCoverOpenStatus?this.carBackCoverClose():this.carBackCoverOpen())}))}mounted(){this.init(),this.renderI(),window.addEventListener("resize",(()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})),window.addEventListener("click",this.onPointClick)}};C=m([(0,a.Yl)({components:{}})],C);var v=C,w=v,g=o(2528),b=(0,g.c)(w,c,h,!1,null,null,null),y=b.exports,O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"container"}})},x=[],_=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let S=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"scene",void 0),(0,s.c)(this,"camera",void 0),(0,s.c)(this,"cube",void 0),(0,s.c)(this,"renderer",void 0),(0,s.c)(this,"controls",void 0)}mounted(){this.scene=new l.KAh,this.camera=new l.OIf,this.camera.position.z=10,this.camera.position.y=2;const e=new l.o1_,t=new l.a8N({color:"green"});this.cube=new l.Ss9(e,t),this.cube.position.set(0,2,0),this.scene.add(this.cube),this.renderer=new l.gpv({antialias:!0});let o=document.getElementById("container");o.appendChild(this.renderer.domElement),this.renderer.setSize(window.innerWidth,window.innerHeight);const i=new l.euB(10,10);this.scene.add(i),this.controls=new d.g(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=2,this.controls.enablePan=!1;const n=new l._gS(5);n.position.set(0,2,0),this.scene.add(n),this.initPanel(),this.animate(),window.addEventListener("resize",(()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.update}))}setTarget(e,t,o){console.log(typeof e)}animate(){requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera)}initPanel(){let e={lookAt:()=>{this.camera.position.y=15,this.camera.position.z=10,this.controls.target.y=2,this.controls.update()},moveCube:()=>{this.cube.position.x=2,this.controls.target.set(2,2,0),this.controls.update()},right:.1,color:"#6c6c6c",type:"正常",isShow:!1},t=new u.cp,o=t.addFolder("配置");o.add(e,"lookAt").name("改变仰角"),o.add(e,"moveCube").name("移动物体"),o.add(e,"right").min(.1).max(4).step(.1).onChange((e=>{this.cube.position.x=e})),o.addColor(e,"color").onChange((e=>{this.cube.material.color.set(e)})),o.add(e,"type",["正常","异常","错误"]).onChange((e=>{})),o.add(e,"isShow")}};S=_([a.Yl],S);var k=S,A=k,B=(0,g.c)(A,O,x,!1,null,"5669b9fe",null),F=B.exports,j=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let z=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"loadingVisible",!1)}mounted(){let e=this;e.$Bus.$on("visibleMask",(e=>{this.loadingVisible=e,console.log(e)}))}};z=j([(0,a.Yl)({components:{CarDemo:y,Demo1:F}})],z);var M=z,L=M,P=(0,g.c)(L,n,r,!1,null,null,null),E=P.exports;i.cp.config.productionTip=!1;const R=new i.cp;i.cp.prototype.$Bus=R,new i.cp({render:e=>e(E)}).$mount("#app")}},t={};function o(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,i,n,r){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],n=e[l][1],r=e[l][2];for(var a=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](i[c])}))?i.splice(c--,1):(a=!1,r<s&&(s=r));if(a){e.splice(l--,1);var h=n();void 0!==h&&(t=h)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,n,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,r,s=i[0],a=i[1],c=i[2],h=0;if(s.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)var l=c(o)}for(t&&t(i);h<s.length;h++)r=s[h],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(l)},i=self["webpackChunkthreejs_of_vue"]=self["webpackChunkthreejs_of_vue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[999],(function(){return o(5664)}));i=o.O(i)})();
//# sourceMappingURL=app.92d36983.js.map