(function(){"use strict";var e={1736:function(e,t,n){var o=n(6116),i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[e.loadingVisible?t("div",{staticClass:"lmask"},[t("div",{staticClass:"tips"},[e._v("模型加载中~")])]):e._e(),t("car-demo")],1)},r=[],s=n(2332),a=n(5708),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div")},h=[],l=(n(3248),n(180)),d=n(6140),p=n(7216),u=n(6924),m=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};const w=n(1312);let C=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"scene",void 0),(0,s.c)(this,"camera",void 0),(0,s.c)(this,"renderer",void 0),(0,s.c)(this,"circle",void 0),(0,s.c)(this,"axesHelper",void 0),(0,s.c)(this,"orbitControls",void 0),(0,s.c)(this,"tween",void 0),(0,s.c)(this,"mesh",void 0),(0,s.c)(this,"carOpenStatus","close"),(0,s.c)(this,"carCoverOpenStatus","close"),(0,s.c)(this,"carBackCoverOpenStatus","close"),(0,s.c)(this,"doorsField",[]),(0,s.c)(this,"glassField",[]),(0,s.c)(this,"carFrontCover",[]),(0,s.c)(this,"carbackCover",[]),(0,s.c)(this,"spotLight",void 0),(0,s.c)(this,"footMaterial",new l.GAB({color:0,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03})),(0,s.c)(this,"bodyMaterial",new l.GAB({color:11446527,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03})),(0,s.c)(this,"glassMaterial",new l.GAB({color:0,transparent:!0,opacity:.8,roughness:1,metalness:0,envMapIntensity:1,transmission:.95,clearcoat:1,clearcoatRoughness:0})),(0,s.c)(this,"steeringWheelMaterial",new l.GAB({color:16711680,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}))}init(){this.initScene(),this.initCamera(),this.initRenderer(),this.initAxesHelper(),this.initOrbitControls(),this.loadCarModel(),this.initAmbientLight(),this.initFloor(),this.initSpotLight(),this.initCylinderGeometry(),this.initGui()}renderI(e){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.renderI),this.orbitControls.update(),this.tween&&this.tween.update(e)}initScene(){this.scene=new l.KAh}initCamera(){this.camera=new l.OIf(10,window.innerWidth/window.innerHeight,1.8,1e3),this.camera.position.set(25,3.5,-26)}initRenderer(){this.renderer=new l.gpv({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement)}initAxesHelper(){this.axesHelper=new l._gS,this.scene.add(this.axesHelper)}initOrbitControls(){this.orbitControls=new d.g(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.autoRotate=!0,this.orbitControls.maxDistance=50,this.orbitControls.minDistance=1,this.orbitControls.minPolarAngle=0,this.orbitControls.maxPolarAngle=1.5}initGridHelper(){let e=new l.euB(120,180,"red",16777215);e.material.opacity=.5,e.material.transparent=!0,this.scene.add(e)}loadCarModel(){let e=this;e.$Bus.$emit("visibleMask",!0);let t="/threejsCar/tesla/scene.gltf";(new p.y).load(t,(t=>{const n=t.scene;n.scale.set(.01,.01,.01),n.position.y=1.3,e.$Bus.$emit("visibleMask",!1),n.traverse((e=>{-1!=e.name.indexOf("wheels")?e.material=this.footMaterial:-1!=e.name.indexOf("glass")?(e.material=this.glassMaterial,"glass"!=e.name&&this.glassField.push(e)):"door_rf"===e.name?this.doorsField.push(e):"bonnet_ok"===e.name?this.carFrontCover.push(e):"boot_dummy"===e.name||"JUST_BLACK001"===e.name?this.carbackCover.push(e):"movsteer_10_movsteer_100_0"===e.name?e.material=this.steeringWheelMaterial:e.material=this.bodyMaterial,e.castShadow=!0})),this.scene.add(n)}))}initAmbientLight(){let e=new l._E$("#fff",2);this.scene.add(e)}initFloor(){const e=new l.qC0(120,120);let t=(new l.EBH).load("/threejsCar/Maple.jpg");const n=new l.GAB({side:l.oJF,color:8421504,metalness:.5,roughness:.2,map:t}),o=new l.Ss9(e,n);o.rotation.x=Math.PI/2,o.position.y=.5,o.receiveShadow=!0,this.scene.add(o)}initSpotLight(e){let t=new l.KGb(16777215,100,100);t.position.set(0,10,0),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,this.scene.add(t)}initCylinderGeometry(){const e=new l.ec6(80,80,120,64),t=new l.GAB({color:7105644,side:l.oJF}),n=new l.Ss9(e,t);this.scene.add(n)}initGui(){let e={footColor:"#000000",bodyColor:"#aea8ff",steeringWheelColor:"#ff0000",carOpen:this.carOpen,carClose:this.carClose,carIn:this.carIn,carOut:this.carOut,carFrontCoverOpen:this.carFrontCoverOpen,carFrontCoverClose:this.carFrontCoverClose,carBackCoverOpen:this.carBackCoverOpen,carBackCoverClose:this.carBackCoverClose,test:()=>{console.log(this.orbitControls.target,this.camera)}},t=new u.cp;t.addColor(e,"footColor").name("车胎颜色").onChange((e=>{this.footMaterial.color.set(e)})),t.addColor(e,"bodyColor").name("车身颜色").onChange((e=>{this.bodyMaterial.color.set(e)})),t.addColor(e,"steeringWheelColor").name("方向盘颜色").onChange((e=>{this.steeringWheelMaterial.color.set(e)})),t.add(e,"carOpen").name("打开车门"),t.add(e,"carClose").name("关闭车门"),t.add(e,"carIn").name("车内视角"),t.add(e,"carOut").name("车外视角"),t.add(e,"carFrontCoverOpen").name("打开车前盖"),t.add(e,"carFrontCoverClose").name("关闭车前盖"),t.add(e,"carBackCoverOpen").name("打开车后盖"),t.add(e,"carBackCoverClose").name("关闭车后盖"),t.add(e,"test").name("获取视野视角")}carOpen(){this.carOpenStatus="open",this.doorsField.forEach((e=>{this.setAnimationDoor({z:0},{z:e.rotation.z+.8},e)}))}carClose(){this.carOpenStatus="close",this.doorsField.forEach((e=>{this.setAnimationDoor({z:.8},{z:0},e)}))}carIn(){this.orbitControls.enableRotate=!1,this.orbitControls.autoRotate=!1,this.setAnimationCamera({cx:22.99,cy:32,cz:-15,ox:0,oy:0,oz:0},{cx:.14,cy:2.4,cz:1.5,ox:0,oy:-.5,oz:-6})}carOut(){this.orbitControls.enableRotate=!0,this.setAnimationCamera({cx:.14,cy:2.4,cz:1.5,ox:0,oy:-.5,oz:-6},{cx:22.99,cy:32,cz:-15,ox:0,oy:0,oz:0}),this.orbitControls.autoRotate=!0}carFrontCoverOpen(){this.carCoverOpenStatus="open",this.carFrontCover.forEach((e=>{this.setAnimationCover({x:0},{x:.6},e)}))}carFrontCoverClose(){this.carCoverOpenStatus="close",this.carFrontCover.forEach((e=>{this.setAnimationCover({x:.6},{x:0},e)}))}carBackCoverOpen(){this.carBackCoverOpenStatus="open",this.carbackCover.forEach((e=>{this.setAnimationCover({x:0},{x:-.8},e)}))}carBackCoverClose(){this.carBackCoverOpenStatus="close",this.carbackCover.forEach((e=>{this.setAnimationCover({x:-.8},{x:0},e)}))}setAnimationCover(e,t,n){this.tween=new w.Tween(e).to(t,1e3).easing(w.Easing.Quadratic.InOut).onUpdate((e=>{n.rotation.x=e.x})).start()}setAnimationDoor(e,t,n){this.tween=new w.Tween(e).to(t,1e3).easing(w.Easing.Quadratic.InOut).onUpdate((e=>{n.rotation.z=e.z})).start()}setAnimationCamera(e,t){this.tween=new w.Tween(e).to(t,3e3).easing(w.Easing.Quadratic.Out).onUpdate((e=>{this.camera.position.set(e.cx,e.cy,e.cz),this.orbitControls.target.set(e.ox,e.oy,e.oz)})).start()}onPointClick(e){let t=new l.SA0,n=new l.SMI;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,n.setFromCamera(t,this.camera);const o=n.intersectObjects(this.scene.children);o.forEach((e=>{"door_rf_primary_0"===e.object.name||"door_rf_glass0_0"===e.object.name?"open"===this.carOpenStatus?this.carClose():this.carOpen():"bonnet_ok_primary_0"===e.object.name?"open"===this.carCoverOpenStatus?this.carFrontCoverClose():this.carFrontCoverOpen():"boot_primary_0"===e.object.name&&("open"===this.carBackCoverOpenStatus?this.carBackCoverClose():this.carBackCoverOpen())}))}mounted(){this.init(),this.renderI(),window.addEventListener("resize",(()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})),window.addEventListener("click",this.onPointClick)}};C=m([(0,a.Yl)({components:{}})],C);var f=C,g=f,v=n(2528),b=(0,v.c)(g,c,h,!1,null,null,null),y=b.exports,O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"container"}})},x=[],_=(n(2912),n(9904),n(6096),function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s});let S=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"scene",void 0),(0,s.c)(this,"camera",void 0),(0,s.c)(this,"cube",void 0),(0,s.c)(this,"renderer",void 0),(0,s.c)(this,"controls",void 0)}mounted(){this.scene=new l.KAh,this.camera=new l.OIf(120),this.camera.position.z=10,this.camera.position.y=2,this.bufferGeo(),this.renderer=new l.gpv({antialias:!0});let e=document.getElementById("container");e.appendChild(this.renderer.domElement),this.renderer.setSize(window.innerWidth,window.innerHeight);const t=new l.euB(60,60);this.scene.add(t),this.controls=new d.g(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=2,this.controls.enablePan=!1;const n=new l._gS(5);n.position.set(0,2,0),this.scene.add(n),this.initPanel(),this.animate(),window.addEventListener("resize",(()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}))}setTarget(e,t,n){console.log(typeof e)}box(){const e=new l.o1_(10,10,10),t=(new l.Sub(6),(new l.EBH).load("/threejsCar/Maple.jpg")),n=(new l.oJk).setPath("/threejsCar/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);this.scene.background=n;const o=new l.a8N({color:"green",map:t});this.cube=new l.Ss9(e,o),this.cube.position.set(0,2,0),this.scene.add(this.cube)}sphere(){const e=new l.Sub(6),t=(new l.oJk).setPath("/threejsCar/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);this.scene.background=t;const n=new l.a8N({envMap:t});this.cube=new l.Ss9(e,n),this.cube.position.set(0,2,0),this.scene.add(this.cube)}plane(){const e=new l.qC0(6,6),t=(new l.oJk).setPath("/threejsCar/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);this.scene.background=t;const n=new l.a8N({color:16777215,side:l.oJF,wireframe:!0}),o=new l.Ss9(e,n);this.scene.add(o)}bufferGeo(){const e=new l.PRs,t=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1]);e.setAttribute("position",new l._m2(t,3));const n=new l.a8N({color:16711680,side:l.oJF,wireframe:!0}),o=new Uint16Array([0,1,2,2,3,0]);e.index=new l._m2(o,1);const i=new l.Ss9(e,n);i.position.y=2,this.scene.add(i)}animate(){requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera)}initPanel(){let e={lookAt:()=>{this.camera.position.y=15,this.camera.position.z=10,this.controls.target.y=2,this.controls.update()},moveCube:()=>{this.cube.position.x=2,this.controls.target.set(2,2,0),this.controls.update()},right:.1,color:"#6c6c6c",type:"正常",isShow:!1},t=new u.cp,n=t.addFolder("配置");n.add(e,"lookAt").name("改变仰角"),n.add(e,"moveCube").name("移动物体"),n.add(e,"right").min(.1).max(4).step(.1).onChange((e=>{this.cube.position.x=e})),n.addColor(e,"color").onChange((e=>{this.cube.material.color.set(e)})),n.add(e,"type",["正常","异常","错误"]).onChange((e=>{})),n.add(e,"isShow")}};S=_([a.Yl],S);var k=S,A=k,z=(0,v.c)(A,O,x,!1,null,"6da43464",null),F=z.exports,j=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};let B=class extends a.cr{constructor(...e){super(...e),(0,s.c)(this,"loadingVisible",!1)}created(){let e=this;e.$Bus.$on("visibleMask",(e=>{this.loadingVisible=e}))}};B=j([(0,a.Yl)({components:{CarDemo:y,Demo1:F}})],B);var M=B,P=M,R=(0,v.c)(P,i,r,!1,null,null,null),E=R.exports;o.cp.config.productionTip=!1;const H=new o.cp;o.cp.prototype.$Bus=H,new o.cp({render:e=>e(E)}).$mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,r){if(!o){var s=1/0;for(l=0;l<e.length;l++){o=e[l][0],i=e[l][1],r=e[l][2];for(var a=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(a=!1,r<s&&(s=r));if(a){e.splice(l--,1);var h=i();void 0!==h&&(t=h)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,i,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,s=o[0],a=o[1],c=o[2],h=0;if(s.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var l=c(n)}for(t&&t(o);h<s.length;h++)r=s[h],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},o=self["webpackChunkthreejs_of_vue"]=self["webpackChunkthreejs_of_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[999],(function(){return n(1736)}));o=n.O(o)})();
//# sourceMappingURL=app.eb309aca.js.map